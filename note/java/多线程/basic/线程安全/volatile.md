不能用try,catch来获取线程中的异常





# Volatile

volatile，易变的；无定性的。



**volatile两个作用**

* 一个线程改变一个volatile变量时会立即写入主内存，然后是其他工作内存中的缓存失效，重新从主内存中读取
* 禁止指令重排序



**进制指令重排序**

* 当程序执行到volatile变量的读操作或者写操作时，在其前面的操作肯定全部已经进行，且结果已经对后面的操作可见；在其后面的操作肯定还没有进行；

* 在进行指令优化时，不能将在对volatile变量访问的语句放在其后面执行，也不能把volatile变量后面的语句放到其前面执行。



**使用volatile的场景**

对变量的写操作不依赖当前值，该变量没有包含在有其他变量的表达式中。即保证对这个变量的操作都是原子性的才能够使用。

* 标记位
* double check时





